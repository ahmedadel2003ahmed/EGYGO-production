# Payment Flow Visual Guide

## ğŸ¯ User Journey Flow Chart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     EGYGO PAYMENT FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TOURIST  â”‚  Creates trip, selects guide, negotiates
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GUIDE ACCEPTS TRIP                     â”‚
â”‚  Status: awaiting_payment               â”‚
â”‚  Payment: pending                       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRIP DETAILS PAGE                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ’³ Complete Payment              â”‚ â”‚
â”‚  â”‚                                   â”‚ â”‚
â”‚  â”‚  Trip Price: EGP 500              â”‚ â”‚
â”‚  â”‚  âœ“ Price negotiated with guide   â”‚ â”‚
â”‚  â”‚                                   â”‚ â”‚
â”‚  â”‚  ğŸ”’ SSL secured transaction       â”‚ â”‚
â”‚  â”‚  ğŸ’¯ Money-back guarantee          â”‚ â”‚
â”‚  â”‚  âš¡ Instant confirmation           â”‚ â”‚
â”‚  â”‚                                   â”‚ â”‚
â”‚  â”‚  [Proceed to Payment] â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE CHECKOUT SESSION                   â”‚
â”‚  POST /create-checkout-session             â”‚
â”‚  â†’ Returns: checkoutUrl, sessionId         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚  window.location.href = checkoutUrl
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STRIPE HOSTED CHECKOUT PAGE               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ” Secure Payment                   â”‚ â”‚
â”‚  â”‚                                      â”‚ â”‚
â”‚  â”‚  Card Number: [                  ]  â”‚ â”‚
â”‚  â”‚  Expiry:      [      ]  CVC: [    ] â”‚ â”‚
â”‚  â”‚  Name:        [                  ]  â”‚ â”‚
â”‚  â”‚                                      â”‚ â”‚
â”‚  â”‚  [Pay EGP 500]   [Cancel]           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚
     PAYMENT               CANCEL
          â”‚                   â”‚
          â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ STRIPE SENDS  â”‚    â”‚  REDIRECT TO â”‚
  â”‚ WEBHOOK EVENT â”‚    â”‚  CANCEL PAGE â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND UPDATES â”‚    â”‚  PAYMENT CANCEL PAGE         â”‚
â”‚ Trip Status:    â”‚    â”‚  âš ï¸ Payment Cancelled        â”‚
â”‚   confirmed     â”‚    â”‚                              â”‚
â”‚ Payment:        â”‚    â”‚  Your trip is still reserved â”‚
â”‚   paid          â”‚    â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  [Complete Payment]          â”‚
       â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
  Redirect to
  success page
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAYMENT SUCCESS PAGE (Polling)             â”‚
â”‚  â³ Verifying Payment...                    â”‚
â”‚  âœ“ Payment processed by Stripe             â”‚
â”‚  â³ Confirming with our servers...          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚  Poll GET /trips/{id} every 2s
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAYMENT CONFIRMED                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  âœ… Payment Successful!               â”‚ â”‚
â”‚  â”‚                                       â”‚ â”‚
â”‚  â”‚  Trip Details:                        â”‚ â”‚
â”‚  â”‚  Date: Friday, January 15, 2025       â”‚ â”‚
â”‚  â”‚  Amount Paid: EGP 500                 â”‚ â”‚
â”‚  â”‚  Guide: Ahmed Mohamed                 â”‚ â”‚
â”‚  â”‚  Status: âœ“ Confirmed                  â”‚ â”‚
â”‚  â”‚                                       â”‚ â”‚
â”‚  â”‚  [View Trip Details]                  â”‚ â”‚
â”‚  â”‚  [Back to My Trips]                   â”‚ â”‚
â”‚  â”‚                                       â”‚ â”‚
â”‚  â”‚  What's Next?                         â”‚ â”‚
â”‚  â”‚  â†’ Your guide will contact you        â”‚ â”‚
â”‚  â”‚  â†’ Check trip details for meeting pt  â”‚ â”‚
â”‚  â”‚  â†’ Confirmation email sent            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± UI States Visual

### 1ï¸âƒ£ Trip Details - Awaiting Payment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back to My Trips          Trip Details    ğŸ’³      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Trip Information                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  ğŸ“… Date & Time: Jan 15, 2025       â”‚  Actions â”‚  â”‚
â”‚  â±ï¸ Duration: 3 hours               â”‚          â”‚  â”‚
â”‚  ğŸ“ Meeting Point: Pyramids         â”‚ â•”â•â•â•â•â•â•â•— â”‚  â”‚
â”‚                                     â”‚ â•‘  ğŸ’³  â•‘ â”‚  â”‚
â”‚  Itinerary                          â”‚ â•šâ•â•â•â•â•â•â• â”‚  â”‚
â”‚  1. Great Pyramid                   â”‚          â”‚  â”‚
â”‚  2. Sphinx                          â”‚ Complete â”‚  â”‚
â”‚  3. Solar Boat Museum               â”‚ Payment  â”‚  â”‚
â”‚                                     â”‚          â”‚  â”‚
â”‚                                     â”‚  EGP 500 â”‚  â”‚
â”‚                                     â”‚          â”‚  â”‚
â”‚                                     â”‚ ğŸ”’ SSL   â”‚  â”‚
â”‚                                     â”‚ ğŸ’¯ Safe  â”‚  â”‚
â”‚                                     â”‚ âš¡ Fast  â”‚  â”‚
â”‚                                     â”‚          â”‚  â”‚
â”‚                                     â”‚ [PAY NOW]â”‚  â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ Stripe Checkout Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Secure Payment - Powered by Stripe              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Pay EGYGO Trips                                    â”‚
â”‚  EGP 500.00                                         â”‚
â”‚                                                     â”‚
â”‚  Card information                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 4242 4242 4242 4242                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 12 / 25         â”‚ â”‚ 123                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  Name on card                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ John Doe                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  [PAY EGP 500]                                      â”‚
â”‚                                                     â”‚
â”‚  Powered by Stripe | Terms | Privacy               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Success Page - Verifying

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚                    â³                               â”‚
â”‚              Verifying Payment                      â”‚
â”‚                                                     â”‚
â”‚    Please wait while we confirm your payment...     â”‚
â”‚                                                     â”‚
â”‚    âœ“ Payment processed by Stripe                   â”‚
â”‚    â³ Confirming with our servers...                â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ï¸âƒ£ Success Page - Confirmed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚                    âœ…                               â”‚
â”‚           Payment Successful!                       â”‚
â”‚                                                     â”‚
â”‚   Your trip has been confirmed. Get ready for       â”‚
â”‚   an amazing experience!                            â”‚
â”‚                                                     â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘ Trip Details                                  â•‘ â”‚
â”‚  â•‘ Date: Friday, January 15, 2025                â•‘ â”‚
â”‚  â•‘ Amount Paid: EGP 500                          â•‘ â”‚
â”‚  â•‘ Guide: Ahmed Mohamed                          â•‘ â”‚
â”‚  â•‘ Status: âœ“ Confirmed                           â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                     â”‚
â”‚  [View Trip Details]  [Back to My Trips]            â”‚
â”‚                                                     â”‚
â”‚  What's Next?                                       â”‚
â”‚  â†’ Your guide will contact you before the trip      â”‚
â”‚  â†’ Check your trip details for meeting point        â”‚
â”‚  â†’ You'll receive a confirmation email shortly      â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5ï¸âƒ£ Cancel Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚                    âš ï¸                               â”‚
â”‚            Payment Cancelled                        â”‚
â”‚                                                     â”‚
â”‚   Your payment was cancelled. No charges have       â”‚
â”‚   been made to your account.                        â”‚
â”‚                                                     â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘ Your Trip is Still Reserved                   â•‘ â”‚
â”‚  â•‘ ğŸ“… Date: Friday, January 15, 2025             â•‘ â”‚
â”‚  â•‘ ğŸ’° Price: EGP 500                             â•‘ â”‚
â”‚  â•‘ âš¡ Status: Awaiting Payment                   â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                     â”‚
â”‚  Why complete your payment?                         â”‚
â”‚  âœ“ Secure your spot with experienced guide          â”‚
â”‚  âœ“ Lock in your negotiated price                   â”‚
â”‚  âœ“ Get full trip confirmation                       â”‚
â”‚  âœ“ Ensure guide availability                        â”‚
â”‚                                                     â”‚
â”‚  [Complete Payment]  [Back to My Trips]             â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6ï¸âƒ£ My Trips List - With Payment Badges

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  My Trips                                           â”‚
â”‚  [All] [Upcoming] [Active] [Past]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â³ Pending  ğŸ’³ Payment Required  Jan 15     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ›ï¸ Cairo                                    â”‚   â”‚
â”‚  â”‚ ğŸ“… Jan 15, 2025 at 9:00 AM                 â”‚   â”‚
â”‚  â”‚ â±ï¸ 3 hours                                   â”‚   â”‚
â”‚  â”‚ ğŸ“ Pyramids of Giza                         â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ Ahmed Mohamed â­ 4.8                     â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚ [View Details]                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… Confirmed  âœ“ Paid           Jan 20       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ›ï¸ Luxor                                    â”‚   â”‚
â”‚  â”‚ ğŸ“… Jan 20, 2025 at 8:00 AM                 â”‚   â”‚
â”‚  â”‚ â±ï¸ 4 hours                                   â”‚   â”‚
â”‚  â”‚ ğŸ“ Valley of Kings                          â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ Sara Ali â­ 4.9                          â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚ [View Details]                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Color Coding

### Status Colors
- ğŸŸ  **Orange/Yellow** - Awaiting Payment (Warning)
- ğŸŸ¢ **Green** - Confirmed/Paid (Success)
- ğŸ”µ **Blue/Purple** - In Progress (Info)
- ğŸ”´ **Red** - Cancelled/Failed (Error)

### Badge Styles
- **ğŸ’³ Payment Required** - Animated pulse, yellow gradient
- **âœ“ Paid** - Static, green gradient
- **â³ Pending** - Orange background
- **âœ… Confirmed** - Green background

---

## ğŸ”„ State Transitions

```
Trip Status Flow:
pending â†’ guide_selected â†’ negotiating â†’ awaiting_payment â†’ confirmed â†’ in_progress â†’ completed
                                              â†“ (payment)      â†‘
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Payment Status Flow:
pending â†’ (Stripe processes) â†’ paid
   â†“
failed (on error)
```

---

## ğŸ“Š Component Hierarchy

```
My Trips List
â””â”€â”€ Trip Card
    â”œâ”€â”€ Status Badge
    â”œâ”€â”€ Payment Badge (conditional)
    â””â”€â”€ View Details Button

Trip Details Page
â”œâ”€â”€ Trip Information
â””â”€â”€ Actions Sidebar
    â”œâ”€â”€ Payment Section (awaiting_payment)
    â”‚   â”œâ”€â”€ Price Display
    â”‚   â”œâ”€â”€ Features List
    â”‚   â”œâ”€â”€ Pay Now Button
    â”‚   â””â”€â”€ Status Indicator
    â””â”€â”€ Confirmed Section (confirmed + paid)
        â”œâ”€â”€ Success Icon
        â”œâ”€â”€ Confirmation Message
        â””â”€â”€ Payment Reference

Payment Success Page
â”œâ”€â”€ Verification State (polling)
â”‚   â”œâ”€â”€ Spinner
â”‚   â””â”€â”€ Progress Steps
â””â”€â”€ Success State
    â”œâ”€â”€ Success Icon
    â”œâ”€â”€ Trip Summary
    â”œâ”€â”€ Action Buttons
    â””â”€â”€ Next Steps

Payment Cancel Page
â”œâ”€â”€ Cancel Icon
â”œâ”€â”€ Reassurance Message
â”œâ”€â”€ Trip Info Card
â”œâ”€â”€ Benefits List
â””â”€â”€ Action Buttons
```

---

## ğŸ¯ Key Interactions

1. **Click "Proceed to Payment"**
   - Disables button
   - Shows spinner
   - Creates checkout session
   - Redirects to Stripe

2. **Complete Payment on Stripe**
   - Stripe processes payment
   - Sends webhook to backend
   - Redirects to success page

3. **Success Page Polling**
   - Calls API every 2 seconds
   - Shows verification UI
   - Updates when status changes
   - Shows confirmation

4. **Cancel Payment**
   - Redirects immediately
   - Shows cancel page
   - Trip remains reserved
   - Can retry payment

---

This visual guide provides a clear understanding of the payment flow from both user and system perspectives.
